<!doctype html>

<script type="module">
import {ArrayOfStructsView} from "./aosv.js";

const {buffer} = new Uint8Array([
  ... new Array(18  * 4).fill(0),
  1, 2,
  0, 0,
  0, 0, 128, 63,
  0, 0, 0, 64,
  0, 0, 64, 64,
  3,
  0
]);

self.arrayOfStructs = new ArrayOfStructsView(
  buffer, 
  {
    "id": ArrayOfStructsView.Uint16({endianess: 'little'}),
    "_reserved1": ArrayOfStructsView.reserved(2),
    "x": ArrayOfStructsView.Float32({endianess: 'little'}),
    "y": ArrayOfStructsView.Float32({endianess: 'little'}),
    "z": ArrayOfStructsView.Float32({endianess: 'little'}),
    "textureId": ArrayOfStructsView.Uint8(),
    "_reserved2": ArrayOfStructsView.reserved(1)
  }
);

console.assert(arrayOfStructs[4].id === 513, "arrayOfStructs[4].id === 513");
console.assert(arrayOfStructs[4]._unused1 === undefined, "arrayOfStructs[4]._unused1 === undefined");
console.assert(arrayOfStructs[4].x === 1, "arrayOfStructs[4].x === 1");
console.assert(arrayOfStructs[4].y === 2, "arrayOfStructs[4].y === 2");
console.assert(arrayOfStructs[4].z === 3, "arrayOfStructs[4].z === 3");
console.assert(arrayOfStructs[4].textureId === 3, "arrayOfStructs[4].textureId === 3");
</script>